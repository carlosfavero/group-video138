(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{122:function(e,n){},124:function(e,n){},136:function(e,n,t){"use strict";t.r(n);var r,c,a=t(0),o=t.n(a),i=t(59),u=t.n(i),l=(t(72),t(64)),s=t(1),f=t(138),m=function(e){return o.a.createElement("button",{onClick:function(){var n=Object(f.a)();e.history.push("/room/".concat(n))}},"Create room")},d=t(66),p=t(65),h=t(30),g=t(60),v=t.n(g),b=t(31),w=t.n(b),I=t(32),j=I.a.div(r||(r=Object(h.a)(["\n    padding: 20px;\n    display: flex;\n    height: 100vh;\n    width: 90%;\n    margin: auto;\n    flex-wrap: wrap;\n"]))),D=I.a.video.attrs((function(e){return{muted:e.muted}}))(c||(c=Object(h.a)(["\n    height: 40%;\n    width: 50%;\n    border-color: ",";\n"])),(function(e){return e.muted?"red":"blue"})),E=function(e){var n=Object(a.useRef)();return Object(a.useEffect)((function(){e.peer.on("stream",(function(e){n.current.srcObject=e,console.log(n.current.srcObject)}))}),[]),o.a.createElement(D,{muted:e.muted,playsInline:!0,autoPlay:!0,ref:n})},O={height:window.innerHeight/3,width:window.innerWidth/3},y=function(e){var n=Object(a.useState)([]),t=Object(p.a)(n,2),r=t[0],c=t[1],i=Object(a.useRef)(),u=Object(a.useRef)(),l=Object(a.useRef)([]),s=e.match.params.roomID;return Object(a.useEffect)((function(){i.current=v.a.connect("/"),navigator.mediaDevices.getUserMedia({video:O,audio:!0}).then((function(e){u.current.srcObject=e,i.current.emit("join room",s),i.current.on("all users",(function(n){var t=[];n.forEach((function(n){var r=function(e,n,t){var r=new w.a({initiator:!0,trickle:!1,stream:t});return r.on("signal",(function(t){i.current.emit("sending signal",{userToSignal:e,callerID:n,signal:t})})),r}(n,i.current.id,e);l.current.push({peerID:n,peer:r}),t.push({peerID:n,peer:r})})),c(t)})),i.current.on("user joined",(function(n){var t=function(e,n,t){var r=new w.a({initiator:!1,trickle:!1,stream:t});return r.on("signal",(function(e){i.current.emit("returning signal",{signal:e,callerID:n})})),r.signal(e),r}(n.signal,n.callerID,e);l.current.push({peerID:n.callerID,peer:t});var r={peerID:n.callerID,peer:t};c((function(e){return[].concat(Object(d.a)(e),[r])}))})),i.current.on("receiving returned signal",(function(e){l.current.find((function(n){return n.peerID===e.id})).peer.signal(e.signal)})),i.current.on("user left",(function(e){var n=l.current.find((function(n){return n.peerID===e}));n&&n.peer.destroy();var t=l.current.filter((function(n){return n.peerID!==e}));l.current=t,c(t)}))}))}),[]),o.a.createElement(j,null,o.a.createElement(D,{muted:!0,ref:u,autoPlay:!0,playsInline:!0}),r.map((function(e){return o.a.createElement(E,{key:e.peerID,peer:e.peer,muted:!0})})))};var k=function(){return o.a.createElement(l.a,null,o.a.createElement(s.c,null,o.a.createElement(s.a,{path:"/",exact:!0,component:m}),o.a.createElement(s.a,{path:"/room/:roomID",component:y})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},67:function(e,n,t){e.exports=t(136)},72:function(e,n,t){},98:function(e,n){}},[[67,1,2]]]);
//# sourceMappingURL=main.0b751c97.chunk.js.map